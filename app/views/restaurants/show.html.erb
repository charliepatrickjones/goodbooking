<%= render 'shared/alert' %>
<%= render 'shared/searchbar' %>
<div class="container mt-4">
  <div class="large-card-restaurant p-2">
    <% if @restaurant.photos.attached? %>
      <%= cl_image_tag @restaurant.photos.first.key, crop: :fill, class:"shadow-sm rounded" %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1552566626-52f8b828add9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80" alt="">
    <% end %>
    <div class="large-card-restaurant-infos d-flex justify-content-around">
      <div class="large-card-info">
        <h2><%= @restaurant.name %></h2>
        <h3 class="mt-2"><%= @restaurant.category %></h3>
      </div>
      <div class="large-card-info">
        <h2>
          <%= render 'shared/star_rating' %>
        </h2>
      </div>
      <div class="large-card-info">
        <h2 class="card-restaurant-pricing text-right"><%= 'Â£' * (@restaurant.price_range.to_f / 40.0).ceil %></h2>
      </div>
      <!-- Will show owners photo -->
      <div class="large-card-restaurant-avatar">
      <% if @restaurant.user.photo.attached? %>
        <%= cl_image_tag @restaurant.user.photo.key, class: '.large-card-restaurant-avatar avatar-bordered' %>
      <% else %>
        <img src="https://kitt.lewagon.com/placeholder/users/krokrob" class=".large-card-restaurant-avatar avatar-bordered" />
      <% end %>
      </div>
    </div>
  </div>
</div>

<div class="container mt-5">
  <% if current_user.nil? %>
    <%= render 'shared/tabpanel' %>
    <h3> Please sign up to book this restaurant!</h3>
  <% elsif current_user.role == 'guest' %>
    <div class="row">
      <div class="col-sm-8">
        <%= render 'shared/tabpanel' %>
      </div>
      <div class="col-sm-4">
        <% if @booking.date.nil? || @booking.date < Date.today %>
          <%= render 'shared/booking_form_a' %>
        <% else %>
          <%= render 'shared/booking_form_b' %>
        <% end %>
      </div>
    </div>
  <% else %>
    <%= render 'shared/tabpanel' %>
  <% end %>
</div>
